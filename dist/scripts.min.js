"use strict";function setActiveLink(t){t.preventDefault(),Array.from(links,function(t){return t.classList.remove("menu__link--active")});var e=t.target;if(!e.classList.contains("menu__link"))return!1;e.classList.add("menu__link--active"),activeLink.node=pages[arrLinks.indexOf(e.textContent)],activeLink.node.classList.add("js-block"),wayfull.classList.remove("js-block")}function goAddWay(t){var e=links[3];e.classList.contains("menu__link--active")||(Array.from(links,function(t){return t.classList.remove("menu__link--active")}),e.classList.add("menu__link--active")),activeLink.node.classList.remove("js-block"),activeLink.node=pages[3],activeLink.node.classList.add("js-block"),wayfull.classList.remove("js-block")}function getWeather(t,e,a){var r=new XMLHttpRequest;r.onreadystatechange=function(){if(4==this.readyState&&200==this.status){var t=function(t){var e=r(t);this.weekday=e.toLocaleString(a,{weekday:"long"}),this.date=e.toLocaleString(a,{day:"2-digit",month:"long",year:"numeric"})},e=function(t,e,a,r,i){this.title=t,this.icon=e,this.precipType=a,this.temperature=r>0?"+"+Math.round(r):Math.round(r),this.description=i},r=function(t){return new Date(1e3*t)},i=JSON.parse(this.responseText);weather.now.icon=i.current.weather[0].icon,weather.now.description=i.current.weather[0].description,i.current.temp>0?weather.now.temperature="+"+Math.round(i.current.temp):weather.now.temperature=Math.round(i.current.temp);var n=24-r(i.hourly[0].dt).getHours();weather.today.header=new t(i.hourly[0].dt);var o=i.hourly.slice(0,n+1),s=[];o.forEach(function(t,i){return s[i]=new e(r(t.dt).toLocaleString(a,{hour:"2-digit"}),t.weather[0].icon,t.weather[0].main,Math.round(t.temp),t.weather[0].description)}),weather.today.body=s.filter(function(t){return t.title%2==0}).map(function(t){return new e(t.title+":00",t.icon,t.precipType,t.temperature,t.description)}),weather.today.body[weather.today.body.length-1].title="24:00",weather.tomorrow.header=new t(i.hourly[n].dt);var d=i.hourly.slice(n,n+25),y=d[2],l=d[8],c=d[14],h=d[20],u=[y,l,c,h],m=["Ночь","Утро","День","Вечер"];u.forEach(function(t,a){return weather.tomorrow.body[a]=new e(m[a],t.weather[0].icon,t.weather[0].main,Math.round(t.temp),t.weather[0].description)});var p=r(i.hourly[0].dt).getDay(),w=void 0;p<6?w=6-p:6===p&&(w=0);var f=void 0;p<7?f=7-p:0===p&&(f=0,sundayHide());weather.weekend.saturday.header=new t(i.daily[w].dt),weather.weekend.sunday.header=new t(i.daily[f].dt);var v=i.daily[w];[{time:v.dt,icon:v.weather[0].icon,precipType:v.weather[0].main,temperature:v.temp.night,summary:v.weather[0].description},{time:v.dt,icon:v.weather[0].icon,precipType:v.weather[0].main,temperature:v.temp.morn,summary:v.weather[0].description},{time:v.dt,icon:v.weather[0].icon,precipType:v.weather[0].main,temperature:v.temp.day,summary:v.weather[0].description},{time:v.dt,icon:v.weather[0].icon,precipType:v.weather[0].main,temperature:v.temp.eve,summary:v.weather[0].description}].forEach(function(t,a){return weather.weekend.saturday.body[a]=new e(m[a],t.icon,t.precipType,Math.round(t.temperature),t.summary)});var g=i.daily[f];[{time:g.dt,icon:g.weather[0].icon,precipType:g.weather[0].main,temperature:g.temp.night,summary:g.weather[0].description},{time:g.dt,icon:g.weather[0].icon,precipType:g.weather[0].main,temperature:g.temp.morn,summary:g.weather[0].description},{time:g.dt,icon:g.weather[0].icon,precipType:g.weather[0].main,temperature:g.temp.day,summary:g.weather[0].description},{time:g.dt,icon:g.weather[0].icon,precipType:g.weather[0].main,temperature:g.temp.eve,summary:g.weather[0].description}].forEach(function(t,a){return weather.weekend.sunday.body[a]=new e(m[a],t.icon,t.precipType,Math.round(t.temperature),t.summary)}),iconWeather(),textWeather(),headerTemplate(),todayHeaderTemplate(),todayTemplate(),tomorrowHeaderTemplate(),tomorrowTemplate(),saturdayHeaderTemplate(),saturdayTemplate(),sundayHeaderTemplate(),sundayTemplate(),iconTodayWeather(),iconTomorowWeather(),iconWeekendWeather()}};var i="https://api.openweathermap.org/data/2.5/onecall?lat="+t+"&lon="+e+"&lang="+a+"&units=metric&appid=1f2df059e0dcefe5b9990d6851316f83";r.open("GET",i,!0),r.send()}function changeFavoriteCitys(t){t.length>0&&(t[0].count>1&&(citysFavorite.firstSity.sityFullName=t[0].sityFullName,citysFavorite.firstSity.sityName=t[0].sityName,citysFavorite.firstSity.lat=t[0].latPositions,citysFavorite.firstSity.lng=t[0].lngPositions,firstSity.textContent=citysFavorite.firstSity.sityName),"Днипро"===citysFavorite.firstSity.sityName&&1===t.length&&(secondSity.textContent=""),"Львов"===citysFavorite.firstSity.sityName&&1===t.length&&(thirdSity.textContent=""),"Харьков"===citysFavorite.firstSity.sityName&&1===t.length&&(fourthSity.textContent=""),"Одесса"===citysFavorite.firstSity.sityName&&1===t.length&&(fifthSity.textContent="")),t.length>1&&(t[1].count>1&&(citysFavorite.secondSity.sityFullName=t[1].sityFullName,citysFavorite.secondSity.sityName=t[1].sityName,citysFavorite.secondSity.lat=t[1].latPositions,citysFavorite.secondSity.lng=t[1].lngPositions,secondSity.textContent=citysFavorite.secondSity.sityName),"Львов"===citysFavorite.firstSity.sityName&&2===t.length&&(thirdSity.textContent=""),"Львов"===citysFavorite.secondSity.sityName&&2===t.length&&(thirdSity.textContent=""),"Харьков"===citysFavorite.firstSity.sityName&&2===t.length&&(fourthSity.textContent=""),"Харьков"===citysFavorite.secondSity.sityName&&2===t.length&&(fourthSity.textContent=""),"Одесса"===citysFavorite.firstSity.sityName&&2===t.length&&(fifthSity.textContent=""),"Одесса"===citysFavorite.secondSity.sityName&&2===t.length&&(fifthSity.textContent="")),t.length>2&&(t[2].count>1&&(citysFavorite.thirdSity.sityFullName=t[2].sityFullName,citysFavorite.thirdSity.sityName=t[2].sityName,citysFavorite.thirdSity.lat=t[2].latPositions,citysFavorite.thirdSity.lng=t[2].lngPositions,thirdSity.textContent=citysFavorite.thirdSity.sityName),"Харьков"===citysFavorite.firstSity.sityName&&3===t.length&&(fourthSity.textContent=""),"Харьков"===citysFavorite.secondSity.sityName&&3===t.length&&(fourthSity.textContent=""),"Харьков"===citysFavorite.thirdSity.sityName&&3===t.length&&(fourthSity.textContent=""),"Одесса"===citysFavorite.firstSity.sityName&&3===t.length&&(fifthSity.textContent=""),"Одесса"===citysFavorite.secondSity.sityName&&3===t.length&&(fifthSity.textContent=""),"Одесса"===citysFavorite.thirdSity.sityName&&3===t.length&&(fifthSity.textContent="")),t.length>3&&(t[3].count>1&&(citysFavorite.fourthSity.sityFullName=t[3].sityFullName,citysFavorite.fourthSity.sityName=t[3].sityName,citysFavorite.fourthSity.lat=t[3].latPositions,citysFavorite.fourthSity.lng=t[3].lngPositions,fourthSity.textContent=citysFavorite.fourthSity.sityName),"Одесса"===citysFavorite.firstSity.sityName&&4===t.length&&(fifthSity.textContent=""),"Одесса"===citysFavorite.secondSity.sityName&&4===t.length&&(fifthSity.textContent=""),"Одесса"===citysFavorite.thirdSity.sityName&&4===t.length&&(fifthSity.textContent=""),"Одесса"===citysFavorite.fourthSity.sityName&&4===t.length&&(fifthSity.textContent="")),t.length>4&&t[4].count>1&&(citysFavorite.fifthSity.sityFullName=t[4].sityFullName,citysFavorite.fifthSity.sityName=t[4].sityName,citysFavorite.fifthSity.lat=t[4].latPositions,citysFavorite.fifthSity.lng=t[4].lngPositions,fifthSity.textContent=citysFavorite.fifthSity.sityName)}function jsFirstSity(t){t.preventDefault(),currentPlace.textContent=firstSity.textContent,getWeather(citysFavorite.firstSity.lat,citysFavorite.firstSity.lng,"ru"),positions.sityFullName=citysFavorite.firstSity.sityFullName,addsitySity.textContent=positions.sityFullName,void 0!==weatherWay.start&&(weatherWay.start.lat=citysFavorite.firstSity.lat,weatherWay.start.lng=citysFavorite.firstSity.lng,weatherWay.start.sityName=citysFavorite.firstSity.sityName,void 0!==inputTime&&getWeatherWayFirst(weatherWay.start.lat,weatherWay.start.lng,dateConvert(inputTime.value),"ru"))}function jsSecondSity(t){t.preventDefault(),currentPlace.textContent=secondSity.textContent,getWeather(citysFavorite.secondSity.lat,citysFavorite.secondSity.lng,"ru"),positions.sityFullName=citysFavorite.secondSity.sityFullName,addsitySity.textContent=positions.sityFullName,void 0!==weatherWay.start&&(weatherWay.start.lat=citysFavorite.secondSity.lat,weatherWay.start.lng=citysFavorite.secondSity.lng,weatherWay.start.sityName=citysFavorite.secondSity.sityName,void 0!==inputTime&&getWeatherWayFirst(weatherWay.start.lat,weatherWay.start.lng,dateConvert(inputTime.value),"ru"))}function jsThirdSity(t){t.preventDefault(),currentPlace.textContent=thirdSity.textContent,getWeather(citysFavorite.thirdSity.lat,citysFavorite.thirdSity.lng,"ru"),positions.sityFullName=citysFavorite.thirdSity.sityFullName,addsitySity.textContent=positions.sityFullName,void 0!==weatherWay.start&&(weatherWay.start.lat=citysFavorite.thirdSity.lat,weatherWay.start.lng=citysFavorite.thirdSity.lng,weatherWay.start.sityName=citysFavorite.thirdSity.sityName,void 0!==inputTime&&getWeatherWayFirst(weatherWay.start.lat,weatherWay.start.lng,dateConvert(inputTime.value),"ru"))}function jsFourthSity(t){t.preventDefault(),currentPlace.textContent=fourthSity.textContent,getWeather(citysFavorite.fourthSity.lat,citysFavorite.fourthSity.lng,"ru"),positions.sityFullName=citysFavorite.fourthSity.sityFullName,addsitySity.textContent=positions.sityFullName,void 0!==weatherWay.start&&(weatherWay.start.lat=citysFavorite.fourthSity.lat,weatherWay.start.lng=citysFavorite.fourthSity.lng,weatherWay.start.sityName=citysFavorite.fourthSity.sityName,void 0!==inputTime&&getWeatherWayFirst(weatherWay.start.lat,weatherWay.start.lng,dateConvert(inputTime.value),"ru"))}function jsFifthSity(t){t.preventDefault(),currentPlace.textContent=fifthSity.textContent,getWeather(citysFavorite.fifthSity.lat,citysFavorite.fifthSity.lng,"ru"),positions.sityFullName=citysFavorite.fifthSity.sityFullName,addsitySity.textContent=positions.sityFullName,void 0!==weatherWay.start&&(weatherWay.start.lat=citysFavorite.fifthSity.lat,weatherWay.start.lng=citysFavorite.fifthSity.lng,weatherWay.start.sityName=citysFavorite.fifthSity.sityName,void 0!==inputTime&&getWeatherWayFirst(weatherWay.start.lat,weatherWay.start.lng,dateConvert(inputTime.value),"ru"))}function addCityBlock(t,e){var a="datepicker_"+e,r=document.createElement("div");r.classList.add("add-sity__str","js-count_"+e);var i='\n\n        <p class="add-sity__sity">'+t+'</p>\n        <p class="add-sity__arrival">приезд/отъезд</p>\n        <p class="add-sity__date">\n            <input type="text" class="js-calendar" id="'+a+'" placeholder="Дата">\n        </p>\n        <p class="add-sity__del"></p>\n\n';r.innerHTML+=i,htmlCityBlock.append(r);var n={};n["picker_"+e]=new Pikaday({field:document.getElementById(a),firstDay:1,format:"D.MM.YYYY",onSelect:function(){this.getMoment().format("Do MM.YYYY");var t=document.getElementById(a);positionsAddCity.count=e,getWeatherWay(weatherWay["start_"+e].lat,weatherWay["start_"+e].lng,dateConvert(t.value),"ru"),console.log(t.value)},i18n:{previousMonth:"Previous Month",nextMonth:"Next Month",months:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],weekdays:["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"],weekdaysShort:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"]}}),weatherWay["start_"+e]={},weatherWay["start_"+e].lat=positionsAddCity.lat,weatherWay["start_"+e].lng=positionsAddCity.lng,weatherWay["start_"+e].sityName=positionsAddCity.sityName,weatherWay["start_"+e].toDay={},weatherWay["start_"+e].toDay.header={},weatherWay["start_"+e].toDay.body=[],console.log(weatherWay)}function dateConvert(t){var e=t.split("."),a=e[0],r=e[1]-1,i=e[2];return new Date(i,r,a).getTime()/1e3}function getWeatherWay(t,e,a,r){var i=new XMLHttpRequest;i.onreadystatechange=function(){if(4==this.readyState&&200==this.status){var t=function(t){var e=i(t);this.weekday=e.toLocaleString(r,{weekday:"long"}),this.date=e.toLocaleString(r,{day:"2-digit",month:"long",year:"numeric"})},e=function(t,e,a,r,i){this.title=t,this.icon=e,this.precipType=a,this.temperature=r>0?"+"+Math.round(r):Math.round(r),this.description=i},i=function(t){return new Date(1e3*t)},n=JSON.parse(this.responseText);this.time=a;var o=39600,s=this.time+o,d=Math.round((s-n.daily[0].dt)/86400);weatherWay["start_"+positionsAddCity.count].toDay.header=new t(n.daily[d].dt);var y=n.daily[d],l=["Днем","Ночью"];[{time:y.dt,icon:y.weather[0].icon,precipType:y.weather[0].main,temperature:y.temp.day,summary:y.weather[0].description},{time:y.dt,icon:y.weather[0].icon,precipType:y.weather[0].main,temperature:y.temp.night,summary:y.weather[0].description}].forEach(function(t,a){return weatherWay["start_"+positionsAddCity.count].toDay.body[a]=new e(l[a],t.icon,t.precipType,Math.round(t.temperature),t.summary)}),wayfullTemplate(weatherWay["start_"+positionsAddCity.count]),iconWayFull()}};var n="https://api.openweathermap.org/data/2.5/onecall?lat="+t+"&lon="+e+"&lang="+r+"&units=metric&appid=1f2df059e0dcefe5b9990d6851316f83";i.open("GET",n,!0),i.send()}function getWeatherWayFirst(t,e,a,r){var i=new XMLHttpRequest;i.onreadystatechange=function(){if(4==this.readyState&&200==this.status){var t=function(t){var e=i(t);this.weekday=e.toLocaleString(r,{weekday:"long"}),this.date=e.toLocaleString(r,{day:"2-digit",month:"long",year:"numeric"})},e=function(t,e,a,r,i){this.title=t,this.icon=e,this.precipType=a,this.temperature=r>0?"+"+Math.round(r):Math.round(r),this.description=i},i=function(t){return new Date(1e3*t)},n=JSON.parse(this.responseText);this.time=a;var o=39600,s=this.time+o,d=Math.round((s-n.daily[0].dt)/86400);weatherWay.start.toDay.header=new t(n.daily[d].dt);var y=n.daily[d],l=["Днем","Ночью"];[{time:y.dt,icon:y.weather[0].icon,precipType:y.weather[0].main,temperature:y.temp.day,summary:y.weather[0].description},{time:y.dt,icon:y.weather[0].icon,precipType:y.weather[0].main,temperature:y.temp.night,summary:y.weather[0].description}].forEach(function(t,a){return weatherWay.start.toDay.body[a]=new e(l[a],t.icon,t.precipType,Math.round(t.temperature),t.summary)}),console.log(weatherWay),wayfullTemplateFirst(weatherWay.start),iconWayFull()}};var n="https://api.openweathermap.org/data/2.5/onecall?lat="+t+"&lon="+e+"&lang="+r+"&units=metric&appid=1f2df059e0dcefe5b9990d6851316f83";i.open("GET",n,!0),i.send()}function headerTemplate(){var t=document.getElementById("header-template").innerHTML,e=Handlebars.compile(t),a=e(weather.now),r=document.querySelector(".header-visual__js-block"),i=document.querySelector(".header-visual__js-templ");""!==r.innerHTML?(i.remove(),r.innerHTML+=a):r.innerHTML+=a}function textWeather(){headerTemplate();var t=weather.now.description.toLowerCase();weather.now.temperature<-50&&(headerText.textContent=textWeatherArr.textWeather+" "+textWeatherArr.viewWeather[0]+", "+t+" - "+textWeatherArr.clothesWeather[1]),weather.now.temperature>=-50&&weather.now.temperature<=-40&&(headerText.textContent=textWeatherArr.textWeather+" "+textWeatherArr.viewWeather[1]+", "+t+" - "+textWeatherArr.clothesWeather[1]),weather.now.temperature>=-39&&weather.now.temperature<=-30&&(headerText.textContent=textWeatherArr.textWeather+" "+textWeatherArr.viewWeather[2]+", "+t+" - "+textWeatherArr.clothesWeather[1]),weather.now.temperature>=-29&&weather.now.temperature<=-20&&(headerText.textContent=textWeatherArr.textWeather+" "+textWeatherArr.viewWeather[3]+", "+t+" - "+textWeatherArr.clothesWeather[1]),weather.now.temperature>=-19&&weather.now.temperature<=-10&&(headerText.textContent=textWeatherArr.textWeather+" "+textWeatherArr.viewWeather[4]+", "+t+" - "+textWeatherArr.clothesWeather[1]),weather.now.temperature>=-9&&weather.now.temperature<=0&&(headerText.textContent=textWeatherArr.textWeather+" "+textWeatherArr.viewWeather[5]+", "+t+" - "+textWeatherArr.clothesWeather[1]),weather.now.temperature>=1&&weather.now.temperature<=8&&(headerText.textContent=textWeatherArr.textWeather+" "+textWeatherArr.viewWeather[6]+", "+t+" - "+textWeatherArr.clothesWeather[0]),weather.now.temperature>=1&&weather.now.temperature<=8&&"wind"===weather.now.icon&&(headerText.textContent=textWeatherArr.textWeather+" "+textWeatherArr.viewWeather[6]+", "+t+" - "+textWeatherArr.clothesWeather[2]),weather.now.temperature>=1&&weather.now.temperature<=8&&"rain"===weather.now.icon&&(headerText.textContent=textWeatherArr.textWeather+" "+textWeatherArr.viewWeather[6]+", "+t+" - "+textWeatherArr.clothesWeather[3]),weather.now.temperature>=9&&weather.now.temperature<=16&&(headerText.textContent=textWeatherArr.textWeather+" "+textWeatherArr.viewWeather[7]+", "+t),weather.now.temperature>=9&&weather.now.temperature<=16&&"wind"===weather.now.icon&&(headerText.textContent=textWeatherArr.textWeather+" "+textWeatherArr.viewWeather[7]+", "+t+" - "+textWeatherArr.clothesWeather[4]),weather.now.temperature>=9&&weather.now.temperature<=16&&"rain"===weather.now.icon&&(headerText.textContent=textWeatherArr.textWeather+" "+textWeatherArr.viewWeather[7]+", "+t+" - "+textWeatherArr.clothesWeather[5]),weather.now.temperature>=17&&weather.now.temperature<=24&&(headerText.textContent=textWeatherArr.textWeather+" "+textWeatherArr.viewWeather[8]+", "+t),weather.now.temperature>=17&&weather.now.temperature<=24&&"rain"===weather.now.icon&&(headerText.textContent=textWeatherArr.textWeather+" "+textWeatherArr.viewWeather[8]+", "+t+" - "+textWeatherArr.clothesWeather[6]),weather.now.temperature>=25&&weather.now.temperature<=32&&(headerText.textContent=textWeatherArr.textWeather+" "+textWeatherArr.viewWeather[9]+", "+t),weather.now.temperature>=25&&weather.now.temperature<=32&&"rain"===weather.now.icon&&(headerText.textContent=textWeatherArr.textWeather+" "+textWeatherArr.viewWeather[9]+", "+t+" - "+textWeatherArr.clothesWeather[6]),weather.now.temperature>=33&&weather.now.temperature<=40&&(headerText.textContent=textWeatherArr.textWeather+" "+textWeatherArr.viewWeather[10]+", "+t),weather.now.temperature>=41&&weather.now.temperature<=48&&(headerText.textContent=textWeatherArr.textWeather+" "+textWeatherArr.viewWeather[11]+", "+t),weather.now.temperature>=49&&weather.now.temperature<=56&&(headerText.textContent=textWeatherArr.textWeather+" "+textWeatherArr.viewWeather[12]+", "+t),weather.now.temperature>=57&&(headerText.textContent=textWeatherArr.textWeather+" "+textWeatherArr.viewWeather[13]+", "+t)}function todayTemplate(){var t=document.getElementById("today-template").innerHTML,e=Handlebars.compile(t),a=e(weather.today.body),r=document.querySelector(".today__main"),i=document.querySelector(".today__block");""!==r.innerHTML?(i.remove(),r.innerHTML+=a):r.innerHTML+=a}function todayHeaderTemplate(){var t=document.getElementById("today-header-template").innerHTML,e=Handlebars.compile(t),a=e(weather.today.header),r=document.querySelector(".today__title"),i=document.querySelector(".today__header-block");""!==r.innerHTML?(i.remove(),r.innerHTML+=a):r.innerHTML+=a}function tomorrowTemplate(){var t=document.getElementById("tomorrow-template").innerHTML,e=Handlebars.compile(t),a=e(weather.tomorrow.body),r=document.querySelector(".tomorrow__main"),i=document.querySelector(".tomorrow__block");""!==r.innerHTML?(i.remove(),r.innerHTML+=a):r.innerHTML+=a}function tomorrowHeaderTemplate(){var t=document.getElementById("tomorrow-header-template").innerHTML,e=Handlebars.compile(t),a=e(weather.tomorrow.header),r=document.querySelector(".tomorrow__title"),i=document.querySelector(".tomorrow__header-block");""!==r.innerHTML?(i.remove(),r.innerHTML+=a):r.innerHTML+=a}function saturdayHeaderTemplate(){var t=document.getElementById("saturday-header-template").innerHTML,e=Handlebars.compile(t),a=e(weather.weekend.saturday.header),r=document.querySelector(".js-saturday__title"),i=document.querySelector(".saturday__header-block");""!==r.innerHTML?(i.remove(),r.innerHTML+=a):r.innerHTML+=a}function saturdayTemplate(){var t=document.getElementById("saturday-template").innerHTML,e=Handlebars.compile(t),a=e(weather.weekend.saturday.body),r=document.querySelector(".saturday__main"),i=document.querySelector(".saturday__block");""!==r.innerHTML?(i.remove(),r.innerHTML+=a):r.innerHTML+=a}function sundayHeaderTemplate(){var t=document.getElementById("sunday-header-template").innerHTML,e=Handlebars.compile(t),a=e(weather.weekend.sunday.header),r=document.querySelector(".js-sunday__title"),i=document.querySelector(".sunday__header-block");""!==r.innerHTML?(i.remove(),r.innerHTML+=a):r.innerHTML+=a}function sundayTemplate(){var t=document.getElementById("sunday-template").innerHTML,e=Handlebars.compile(t),a=e(weather.weekend.sunday.body),r=document.querySelector(".sunday__main"),i=document.querySelector(".sunday__block");""!==r.innerHTML?(i.remove(),r.innerHTML+=a):r.innerHTML+=a}function sundayHide(){document.querySelector(".js-sunday").classList.add("js-sunday--none")}function iconWeather(){var t=weather.now.icon,e=new Skycons({color:"#d1d2d3"}),a=document.querySelector(".header-visual__icon");"clear-day"===t?(a.id="clear-day",e.add("clear-day",Skycons.PARTLY_CLOUDY_DAY)):"clear-night"===t?(a.id="clear-night",e.add("clear-night",Skycons.CLEAR_NIGHT)):"rain"===t?(a.id="rain",e.add("rain",Skycons.RAIN)):"snow"===t?(a.id="snow",e.add("snow",Skycons.SNOW)):"sleet"===t?(a.id="sleet",e.add("sleet",Skycons.SLEET)):"wind"===t?(a.id="wind",e.add("wind",Skycons.WIND)):"fog"===t?(a.id="fog",e.add("fog",Skycons.FOG)):"cloudy"===t?(a.id="cloudy",e.add("cloudy",Skycons.CLOUDY)):"partly-cloudy-day"===t?(a.id="partly-cloudy-day",e.add("partly-cloudy-day",Skycons.PARTLY_CLOUDY_DAY)):"partly-cloudy-night"===t&&(a.id="partly-cloudy-night",e.add("partly-cloudy-night",Skycons.PARTLY_CLOUDY_NIGHT)),e.play()}function iconTodayWeather(){var t=new Skycons({color:"#009587"});document.querySelectorAll(".today__precip canvas").forEach(function(e){t.add(e,skyconType(e.className))}),t.play()}function iconTomorowWeather(){var t=new Skycons({color:"#009587"});document.querySelectorAll(".tomorrow__precip canvas").forEach(function(e){t.add(e,skyconType(e.className))}),t.play()}function iconWeekendWeather(){var t=new Skycons({color:"#009587"});document.querySelectorAll(".weekend__precip canvas").forEach(function(e){t.add(e,skyconType(e.className))}),t.play()}function wayfullTemplateFirst(t){if(void 0!==positionsAddCity.tempWays){var e=document.querySelector(".js-way"),a=document.getElementById("wayfull-template").innerHTML,r=Handlebars.compile(a),i=r(t),n=(document.querySelector(".wayfull"),document.createElement("div"));n.classList.add("wayfull__block","js-way"),positionsAddCity.tempWays=document.querySelector(".js-way"),e.after(n),n.innerHTML+=i,e.remove()}else{var o=document.getElementById("wayfull-template").innerHTML,s=Handlebars.compile(o),d=s(t),y=document.querySelector(".wayfull"),l=document.createElement("div");l.classList.add("wayfull__block","js-way"),positionsAddCity.tempWays=document.querySelector(".js-way"),y.append(l),l.innerHTML+=d}}function wayfullTemplate(t){if(void 0!==positionsAddCity["tempWays_"+positionsAddCity.count]){var e=document.querySelector(".js-way_"+positionsAddCity.count),a=document.getElementById("wayfull-template").innerHTML,r=Handlebars.compile(a),i=r(t),n=(document.querySelector(".wayfull"),document.createElement("div"));n.classList.add("wayfull__block","js-way_"+positionsAddCity.count),positionsAddCity["tempWays_"+positionsAddCity.count]=document.querySelector(".js-way_"+positionsAddCity.count),e.after(n),n.innerHTML+=i,e.remove()}else{var o=document.getElementById("wayfull-template").innerHTML,s=Handlebars.compile(o),d=s(t),y=document.querySelector(".wayfull"),l=document.createElement("div");l.classList.add("wayfull__block","js-way_"+positionsAddCity.count),positionsAddCity["tempWays_"+positionsAddCity.count]=document.querySelector(".js-way_"+positionsAddCity.count),y.append(l),l.innerHTML+=d}}function iconWayFull(){var t=new Skycons({color:"#009587"});document.querySelectorAll(".wayfull__precip canvas").forEach(function(e){t.add(e,skyconType(e.className))}),t.play(),console.log(t)}Array.from||(Array.from=function(){var t=Object.prototype.toString,e=function(e){return"function"==typeof e||"[object Function]"===t.call(e)},a=function(t){var e=Number(t);return isNaN(e)?0:0!==e&&isFinite(e)?(e>0?1:-1)*Math.floor(Math.abs(e)):e},r=Math.pow(2,53)-1,i=function(t){var e=a(t);return Math.min(Math.max(e,0),r)};return function(t){var a=this,r=Object(t);if(null==t)throw new TypeError("Array.from requires an array-like object - not null or undefined");var n,o=arguments.length>1?arguments[1]:void 0;if(void 0!==o){if(!e(o))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(n=arguments[2])}for(var s,d=i(r.length),y=e(a)?Object(new a(d)):new Array(d),l=0;l<d;)s=r[l],y[l]=o?void 0===n?o(s,l):o.call(n,s,l):s,l+=1;return y.length=d,y}}());var controls=document.querySelector(".page__menu"),links=controls.querySelectorAll(".menu__link"),addSity=document.querySelector(".add-sity"),wayfull=document.querySelector(".wayfull"),lookWay=document.querySelector(".add-sity__look"),pages=document.querySelectorAll(".js-page"),arrLinks=[links[0].textContent,links[1].textContent,links[2].textContent,links[3].textContent],buttonWay=document.querySelector(".button-way__button"),activeLink={node:pages[0]},removeActiveLink=function(t){t.preventDefault(),activeLink.node.classList.remove("js-block")},activeWayFullLink=function(t){t.preventDefault(),addSity.classList.remove("js-block"),wayfull.classList.add("js-block")};buttonWay.addEventListener("click",goAddWay),controls.addEventListener("click",removeActiveLink),controls.addEventListener("click",setActiveLink),lookWay.addEventListener("click",activeWayFullLink);var inputCity=document.getElementById("search-city"),autocomplete=new google.maps.places.Autocomplete(inputCity,{types:["(cities)"]}),currentPlace=document.getElementById("header-visual__city"),positions={latPositions:"",lngPositions:"",sityFullName:"Киев, Украина",sityName:"Киев",count:1},addsitySity=document.querySelector(".add-sity__sity");google.maps.event.addListener(autocomplete,"place_changed",function(){var t=autocomplete.getPlace();console.log(t),currentPlace.textContent=t.name,positions.latPositions=t.geometry.location.lat(),positions.lngPositions=t.geometry.location.lng(),positions.sityFullName=t.formatted_address,positions.sityName=t.name,void 0!==inputTime&&void 0===weatherWay.start||(weatherWay.start.lat=t.geometry.location.lat(),weatherWay.start.lng=t.geometry.location.lng(),weatherWay.start.sityName=t.name),addsitySity.textContent=positions.sityFullName,console.log(t.formatted_address),getWeather(positions.latPositions,positions.lngPositions,"ru"),addLocStor()});var weather={now:{icon:"",temperature:"",description:""},today:{header:{},body:[]},tomorrow:{header:{},body:[]},weekend:{saturday:{header:{},body:[]},sunday:{header:{},body:[]}}};getWeather(50.4501,30.523400000000038,"ru");var firstSity=document.querySelector(".js-firstSity"),secondSity=document.querySelector(".js-secondSity"),thirdSity=document.querySelector(".js-thirdSity"),fourthSity=document.querySelector(".js-fourthSity"),fifthSity=document.querySelector(".js-fifthSity"),citysFavorite={firstSity:{sityFullName:"Киев, Украина",sityName:"Киев",lat:"50.4501",lng:"30.523400000000038"},secondSity:{sityFullName:"Днипро, Днепропетровская область, Украина",sityName:"Днипро",lat:"48.46471700000001",lng:"35.04618299999993"},thirdSity:{sityFullName:"Львов, Львовская область, Украина",sityName:"Львов",lat:"49.83968300000001",lng:"24.029717000000005"},fourthSity:{sityFullName:"Харьков, Харьковская область, Украина",sityName:"Харьков",lat:"49.9935",lng:"36.230383000000074"},fifthSity:{sityFullName:"Одесса, Одесская область, Украина",sityName:"Одесса",lat:"46.482526",lng:"30.723309500000028"}},addLocStorStart=function(){var t=[],e=localStorage.length;if(e>0)for(var a=0;a<e;a++){var r=localStorage.key(a);t.push(JSON.parse(localStorage.getItem(r)))}changeFavoriteCitys(t.reduce(function(t,e,a){var r=t.findIndex(function(t){return t.count<e.count});return r>-1?t.splice(r,0,e):t.push(e),t},[]))};addLocStorStart();var addLocStor=function(){null!==localStorage.getItem(positions.sityName)?positions.count=JSON.parse(localStorage.getItem(positions.sityName)).count+1:positions.count=1,localStorage.setItem(positions.sityName,JSON.stringify(positions));var t=[],e=localStorage.length;if(e>0)for(var a=0;a<e;a++){var r=localStorage.key(a);t.push(JSON.parse(localStorage.getItem(r)))}var i=t.reduce(function(t,e,a){var r=t.findIndex(function(t){return t.count<e.count});return r>-1?t.splice(r,0,e):t.push(e),t},[]);console.log(i),changeFavoriteCitys(i)};firstSity.addEventListener("click",jsFirstSity),secondSity.addEventListener("click",jsSecondSity),thirdSity.addEventListener("click",jsThirdSity),fourthSity.addEventListener("click",jsFourthSity),fifthSity.addEventListener("click",jsFifthSity);var skyconType=function(t){return"10d"===t||"10n"===t||"9d"===t||"10n"===t?Skycons.RAIN:"13d"===t||"13n"===t?Skycons.SNOW:"50d"===t||"50n"===t?Skycons.FOG:"2d"===t||"2n"===t?Skycons.CLOUDY:"03d"===t||"04d"===t?Skycons.PARTLY_CLOUDY_DAY:"03n"===t||"04n"===t?Skycons.PARTLY_CLOUDY_NIGHT:"01d"===t?Skycons.CLEAR_DAY:"01n"===t?Skycons.CLEAR_NIGHT:Skycons.CLOUDY};addsitySity.textContent=positions.sityFullName;var addCity=document.getElementById("add-city"),autocompleteAddCity=new google.maps.places.Autocomplete(addCity,{types:["(cities)"]}),positionsAddCity={sityFullName:"",sityName:"",lengthArrSity:1,lat:"",lng:"",count:""},htmlCityBlock=document.querySelector(".js-add-sity__block");google.maps.event.addListener(autocompleteAddCity,"place_changed",function(){var t=autocompleteAddCity.getPlace();positionsAddCity.lat=t.geometry.location.lat(),positionsAddCity.lng=t.geometry.location.lng(),positionsAddCity.sityName=t.name,addCityBlock(t.formatted_address,positionsAddCity.lengthArrSity),addCity.classList.add("js-none"),positionsAddCity.lengthArrSity+=1});var addCityButton=document.querySelector(".add-sity__button"),addCityInput=function(t){t.preventDefault();var e=document.querySelector(".js-add-sity__block"),a=document.querySelectorAll(".js-calendar");0===e.children.length?(addCity.classList.remove("js-none"),addCity.value=""):""===a[a.length-1].value&&void 0!==a?alert("Добавьте дату у последнего города"):(addCity.classList.remove("js-none"),addCity.value="")};addCityButton.addEventListener("click",addCityInput);var inputTime=void 0,picker=new Pikaday({field:document.getElementById("datepicker"),firstDay:1,format:"D.MM.YYYY",onSelect:function(){this.getMoment().format("Do MM.YYYY"),inputTime=document.getElementById("datepicker"),getWeatherWayFirst(weatherWay.start.lat,weatherWay.start.lng,dateConvert(inputTime.value),"ru")},i18n:{previousMonth:"Previous Month",nextMonth:"Next Month",months:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],weekdays:["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"],weekdaysShort:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"]}}),deleteSityBlock=function(t){if(t.target.classList.contains("add-sity__del"))if(t.target.parentNode.classList.contains("js-count_0")){t.target.parentNode.remove(),delete weatherWay.start;var e=document.querySelector(".js-way");e.remove()}else{var a=t.target.parentNode.classList,r=a[1],i=r.split("_"),n=i[1];delete weatherWay["start_"+n];var o=document.querySelector(".js-way_"+n);o.remove(),t.target.parentNode.remove()}};htmlCityBlock.addEventListener("click",deleteSityBlock);var weatherWay={start:{lat:"50.4501",lng:"30.523400000000038",sityName:"Киев",toDay:{header:{},body:[]}}},goWayFullLink=function(t){var e=document.querySelector(".wayfull");console.log(e.children),e.children>1&&e.children.remove(),arrBlockSity.forEach(function(t){return e.append(t)})},headerText=document.querySelector(".header-visual__text"),textWeatherArr={textWeather:"Сейчас за окном",viewWeather:["катастрофический мороз","чрезвычайно сильный мороз","сильный мороз","умеренный мороз","мороз","слабый мороз","холодно","прохладно","тепло","очень тепло","жара","сильная жара","чрезвычайно сильная погода (вероятны тепловые удары)","катастрофическая жара"],clothesWeather:["одевайся теплее","одевайся теплее, не забывай шапку, шарф и перчатки","одевай курточку","одевайся теплее и не забудь зонтик","одевай кофту","одевай кофту и не забудь зонтик","не забудь зонтик"]};textWeather();